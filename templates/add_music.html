<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>The Music Library</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="/static/assets/favicon.ico"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"
          type="text/css"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/static/css/styles.css" rel="stylesheet"/>

</head>
<body id="page-top">
<!-- Navigation-->
<nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
    <div class="container">
        <a class="navbar-brand" href="http://127.0.0.1:5000/">The Music Library</a>
        <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button"
                data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive"
                aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto">
                <!-- change href accordingly in live environment-->
                <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded"
                                                     href="http://127.0.0.1:5000/">Home</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- Masthead-->
<header class="masthead bg-primary text-white text-center">
    <div class="container d-flex align-items-center flex-column">
        <!-- Masthead Avatar Image-->
        <img class="masthead-avatar mb-5" src="/static/assets/img/portfolio/vinyl.png" alt="..."/>
        <!-- Masthead Heading-->
        <h1 class="masthead-heading text-uppercase mb-0">Add your music</h1>
        <!-- Icon Divider-->
        <div class="divider-custom divider-light">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
            <div class="divider-custom-line"></div>
        </div>
        <!-- Masthead Subheading-->
        <p class="masthead-subheading font-weight-light mb-0">Use the following form to add your own music.</p>
    </div>
</header>

<!-- Portfolio Section-->
<section class="page-section portfolio" id="portfolio">
    <div class="container">
        <!-- Portfolio Section Heading-->
        <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Form</h2>
        <!-- Icon Divider-->
        <div class="divider-custom">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
            <div class="divider-custom-line"></div>
        </div>
        <!-- Form-->
        <form class="row g-4 mx-auto col-10 lead" method="post" id="music_form" action="http://localhost:8000/">
            <!-- Name-->
            <div class="col-6 mx-auto">
                <label for="inputName" class="form-label">Name</label>
                <input type="text" class="form-control" id="inputName" name="name" required>
            </div>
            <!-- Release Year-->
            <div class="col-6">
                <label for="year" class="form-label">Release Year</label>
                <select id="year" class="form-select" required>
                    <option selected>Choose...</option>
                    <option>&nbsp;</option>
                </select>
            </div>
            <script>
                // Add years to dropdown
                var selectBox = document.getElementById('year');
                for (var i = 2021; i >= 1900; i--) {
                    var option = document.createElement('option');
                    option.value = i;
                    option.innerHTML = i;
                    selectBox.appendChild(option);
                }
            </script>
            <!-- Artist-->
            <div class="col-6 mx-auto">
                <label for="chooseArtist" class="form-label">Artist</label>
                <select id="chooseArtist" class="form-select">
                    <option selected>Choose...</option>
                    <option>Dion and The Belmonts</option>
                    <option>Elvis Presley</option>
                    <option>Ricky Coyne</option>
                    <option>The Butlers</option>
                    <option>The Satins</option>
                    <option>Bobby Rydell</option>
                    <option>The Elegants</option>
                </select>
            </div>

            <!-- Type-->
            <div class="col-6">
                <label for="radioType" class="form-label" id="chooseType">Type</label>
                <br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                           value="option1">
                    <label class="form-check-label" for="inlineRadio1">Single</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                           value="option2">
                    <label class="form-check-label" for="inlineRadio2">EP</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3"
                           value="option3">
                    <label class="form-check-label" for="inlineRadio3">Album</label>
                </div>
            </div>

            <!-- Description-->
            <div class="col-6 mx-auto">
                <label for="inputDescription" class="form-label">Description</label>
                <input type="text" class="form-control" id="inputDescription">
            </div>

            <!-- Track-->
            <div class="col-3 mx-auto">
                <label for="inputTracks" class="form-label">Track</label>
                <input type="text" class="form-control" id="inputTracks" required>
                <br>
                <p class="trackstext" id="tracktextarea"></p>
                <br>
            </div>

            <div class="col-3 mx-auto">
                <button type="button" id="add_track" class="add_track" onclick="addTrack()">Add Track</button>
                <br>
                <button type="button" id="removeBtn" class="remove_tracks">Remove All Tracks</button>

            </div>

            <!-- Add Track to list-->
            <script>
                function addTrack() {
                    let track = document.getElementById("tracktextarea");
                    let paragraph = document.createElement("p");
                    paragraph.textContent = document.getElementById("inputTracks").value;
                    // field cant be empty
                    document.getElementById("inputTracks").value !== "" ? track.appendChild(paragraph) : console.log("no input");
                    // Remove track on click
                    document.getElementById("removeBtn").addEventListener("click", function () {
                        track.removeChild(paragraph);
                    });
                }
            </script>

            <!-- Submit the track-->
            <div class="col-12 mx-auto">
                <button type="submit" class="form__submit" id="btnSubmit">Submit</button>
            </div>
        </form>

        <script>
            function getRadio() {
                let single = document.getElementById("inlineRadio1");
                let ep = document.getElementById("inlineRadio2");
                let album = document.getElementById("inlineRadio3");

                if (single.checked) {
                    return "single";
                } else if (ep.checked) {
                    return "ep";
                } else if (album.checked) {
                    return "album";
                }
            }

            function handleSubmit(event) {
               {# let name = document.getElementById("inputName").value;
                let year = document.getElementById("year").value;
                let artist = document.getElementById("chooseArtist").value;
                let type = getRadio();
                let description = document.getElementById("inputDescription").value;
                let tracks = document.getElementById("tracktextarea").value;

                event.preventDefault();
                const object = JSON.stringify({name, year, artist, type, description, tracks});
                console.log(object);#}

                // POST to server - https://reqbin.com/req/4rwevrqh/post-json-example

 {#               let music_form = document.getElementById('music_form');
                let formData = new FormData(music_form);

                fetch('http://localhost:8080', {
                    method: 'PUT',
                    body: formData
                })
                    .then(response => response.json())
                    .then(result => {
                        console.log('Success:', result);
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
#}

            }
        </script>
    </div>
    </div>
</section>
<!-- Footer-->
<footer class="footer text-center">
    <div class="container">
        <div class="row">
            <!-- Footer Location-->
            <!-- Footer About Text-->
            <div class="col-12">
                <h4 class="text-uppercase mb-4">About The Music Library</h4>
                <p class="lead mb-0">
                    Web Technology semester course - fall 2021.
                </p>
            </div>
        </div>
    </div>
</footer>
<!-- Copyright Section-->
<div class="copyright py-4 text-center text-white">
    <div class="container"><small>Copyright &copy; The Music Library 2021</small></div>
</div>

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="/static/js/scripts.js"></script>
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<!-- * *                               SB Forms JS                               * *-->
<!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
</body>
</html>
